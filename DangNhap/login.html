<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talent Hub - Đăng nhập</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="login-container">
        <div class="login-layout">
            <div class="branding-section">
                <div class="branding-content">
                    <span>WEBSITE QUẢN LÝ TUYỂN DỤNG TALENT HUB</span>
                </div>
            </div>
            <div class="interface" id="login">
                <div class="login-form-container">
                    <form class="login-form" id = "loginForm">
                        <h2 class="login-title">Đăng nhập</h2>
                        <div class="register-prompt">
                            <span>Người dùng mới?</span>
                            <a href="register.html" class="register-link">Đăng ký</a>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="username">Tên đăng nhập</label>
                            <input type="text" id="username" class="form-input">
                            <div class="error-message">Lỗi! Vui lòng nhập lại.</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="password">Mật khẩu</label>
                            <input type="password" id="password" class="form-input">
                            <div class="error-message">Lỗi! Vui lòng nhập lại.</div>
                        </div>
                        <button type="submit" class="submit-button">Tiếp tục</button>
                        <a href="resetPassword.html" class="forgot-password">Quên mật khẩu?</a>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Xử lý form đăng nhập
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            let valid = true;
            const username = document.getElementById('username');
            const password = document.getElementById('password');
            const usernameError = username.nextElementSibling;
            const passwordError = password.nextElementSibling;

            usernameError.style.display = 'none';
            passwordError.style.display = 'none';

            // Kiểm tra định dạng username
            if (!username.value.trim() || username.value.length < 4) {
                usernameError.textContent = 'Tên đăng nhập phải từ 4 ký tự.';
                usernameError.style.display = 'block';
                valid = false;
            }

            // Kiểm tra định dạng password
            if (!password.value.trim() || password.value.length < 6) {
                passwordError.textContent = 'Mật khẩu phải từ 6 ký tự.';
                passwordError.style.display = 'block';
                valid = false;
            }

             if (valid) {
                // Demo: giả lập userId trả về từ backend dựa trên username
                let userId = '';
                if (username.value.startsWith('uv')) userId = 'UV12345';
                else if (username.value.startsWith('ntd')) userId = 'NTD67890';
                else if (username.value.startsWith('nv')) userId = 'NV54321';
                else userId = 'UNKNOWN';

                handleLoginSuccess(userId);
            }
        });
    });
    // Sau khi đăng nhập thành công, nhận userId từ backend
    function handleLoginSuccess(userId) {
        let url = '';
        if (userId.startsWith('UV')) url = '/UngVien/index.html';
        else if (userId.startsWith('NTD')) url = '/NTD/index2.html';
        else if (userId.startsWith('NV')) url = '/NhanVien/index.html';

        if (url) {
            window.location.href = url; 
         } else {
            alert('Không xác định được vai trò người dùng!');
        }
    }

    </script>
</body>
</html>